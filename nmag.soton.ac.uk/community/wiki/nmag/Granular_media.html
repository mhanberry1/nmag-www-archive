<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Nmag - Granular media - Nmag - computational micromagnetics</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<link href="../../themes/nmag/stylesheets/application.css" media="all" rel="stylesheet" type="text/css" />
<script src="../../javascripts/prototype.js" type="text/javascript"></script>
<script src="../../javascripts/effects.js" type="text/javascript"></script>
<script src="../../javascripts/dragdrop.js" type="text/javascript"></script>
<script src="../../javascripts/controls.js" type="text/javascript"></script>
<script src="../../javascripts/application.js" type="text/javascript"></script>
<link href="../../stylesheets/jstoolbar.css" media="screen" rel="stylesheet" type="text/css" />
<!--[if IE]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/community/stylesheets/csshover.htc);}
    </style>
<![endif]-->

<!-- page specific tags -->

  <link href="../../stylesheets/scm.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="wrapper">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="../../login.html" class="login">Sign in</a></li>
<li><a href="../../account/register.html" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../index.html" class="home">Home</a></li>
<li><a href="../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>
      
<div id="header">
    <div id="quick-search">
        <form action="../../search/index/nmag.html" method="get">
        <a href="../../search/index/nmag.html" accesskey="4">Search</a>:
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    
    <h1>Nmag</h1>
    
    <div id="main-menu">
        <ul><li><a href="../../projects/show/nmag.html" class="overview">Overview</a></li>
<li><a href="../../projects/activity/nmag.html" class="activity">Activity</a></li>
<li><a href="../nmag.html" class="wiki selected">Wiki</a></li></ul>
    </div>
</div>

<div class="" id="main">
    <div id="sidebar">        
        
  <h3>Wiki</h3>

<a href="../nmag.html">Start page</a><br />
<a href="Page_index/special.html">Index by title</a><br />
<a href="Date_index/special.html">Index by date</a><br />


        
    </div>
    
    <div id="content">
				
        <div class="contextual">








<a href="Granular_media/history.html" class="icon icon-history">History</a>
</div>





<div class="wiki">
  <h1 id="Granular-media">Granular media<a href="Granular_media.html#Granular-media" class="wiki-anchor">&para;</a></h1>


	<h2 id="Overview">Overview<a href="Granular_media.html#Overview" class="wiki-anchor">&para;</a></h2>


	<p>The scripts on this page are intended as a starting point to allow users to create their own granular-like meshes for use with Nmag. Although both scripts should be fully functional as they are, it is likely they will need amending for each particular case. There are two different programs, both written in Python, one which creates an array of ellipsoids using Netgen and the other creates a Voronoi-cell type arrangement of grains. Both programs have very similar input syntaxes.</p>


	<h2 id="Ellipsoid-Builder">Ellipsoid Builder<a href="Granular_media.html#Ellipsoid-Builder" class="wiki-anchor">&para;</a></h2>


	<p>This program creates an array of meshed ellipsoids using Netgen. The program has many variables which can be selected from the command line; the full list of which can be found by running <code>EllipsoidBuilder.py --help</code> or reading the source code.</p>


	<h3 id="Download">Download<a href="Granular_media.html#Download" class="wiki-anchor">&para;</a></h3>


	<p><a href="https://www.dropbox.com/sh/gifwko3dh6yplqj/vV4ladlO-v" class="external">Download here</a><br />
This Dropbox page has the EllipsoidBuilder.py script, combined with a sample output which was used to make the image below for reference.</p>


	<h3 id="Prerequisites">Prerequisites<a href="Granular_media.html#Prerequisites" class="wiki-anchor">&para;</a></h3>


	<ul>
	<li>Python 2.x</li>
		<li>Netgen <a class="external" href="http://www.hpfem.jku.at/netgen/">http://www.hpfem.jku.at/netgen/</a></li>
	</ul>


	<h3 id="Output">Output<a href="Granular_media.html#Output" class="wiki-anchor">&para;</a></h3>


Once successfully run, the program outputs a selection of files as follows (assuming the chosen filename was <code>Ellipsoids</code>):
	<ul>
	<li><code>Ellipsoids.py</code> - skeleton Python Nmag script with the material and meshes defined (needs actual simulation code to be written manually, e.g. to define a hysteresis loop etc.)</li>
		<li><code>Ellipsoids.geo</code> - geometry file read by Netgen</li>
		<li><code>Ellipsoids.neutral</code> - 'neutral' file which is the mesh output from Netgen</li>
		<li><code>Ellipsoids.nmesh.h5</code> - the mesh file once interpreted and compressed using <code>nmeshimport</code></li>
	</ul>


	<p>A meshed output can be seen in the image below.</p>


	<p><img src="https://dl.dropbox.com/sh/gifwko3dh6yplqj/0fdIZK_GRJ/Ellipsoids.jpg?dl=1" alt="" /></p>


	<p>This was created using the default values in the script with 5 rows and 10 columns. Note that the script introduces randomness in the ellipsoid orientation by default.</p>


	<h3 id="Known-Issues">Known Issues<a href="Granular_media.html#Known-Issues" class="wiki-anchor">&para;</a></h3>


	<p>On some installations, calling <code>netgen</code> will not start Netgen. The reference to Netgen at the bottom of the script may have to be changed to <code>/opt/netgen/bin/netgen</code> or a symbolic link or similar created.</p>


	<h2 id="Voronoi-Builder">Voronoi Builder<a href="Granular_media.html#Voronoi-Builder" class="wiki-anchor">&para;</a></h2>


	<p>This program creates and array of extruded Voronoi cells using Gmsh which can be used to simulate a granular medium in Nmag. The program has many variables which can be selected from the command line; the full list of which can be found by running <code>VoronoiBuilder.py --help</code> or reading the source code. Unlike the Ellipsoid Builder script, this program does not automatically mesh the geometry. Instead, the <code>.geo</code> file must be opened in Gmsh and meshed manually.</p>


	<h3 id="Download">Download<a href="Granular_media.html#Download" class="wiki-anchor">&para;</a></h3>


	<p><a href="https://www.dropbox.com/sh/frxdsc1zksw9wb6/_izvTs5pBP" class="external">Download here</a><br />
This Dropbox page has the VoronoiBuilder.py script, combined with a sample output which was used to make the images below for reference.</p>


	<h3 id="Prerequisites">Prerequisites<a href="Granular_media.html#Prerequisites" class="wiki-anchor">&para;</a></h3>


	<ul>
	<li>Python 2.6</li>
		<li>Gmsh <a class="external" href="http://geuz.org/gmsh/">http://geuz.org/gmsh/</a></li>
		<li>Qhull <a class="external" href="http://qhull.org">http://qhull.org</a></li>
	</ul>


	<h3 id="Output">Output<a href="Granular_media.html#Output" class="wiki-anchor">&para;</a></h3>


Once successfully run, the program outputs a selection of files as follows (assuming the chosen filename was <code>Voronoi</code>):
	<ul>
	<li><code>Voronoi.py</code> - skeleton Python Nmag script with the material and meshes defined (needs actual simulation code to be written manually, e.g. to define a hysteresis loop etc.)</li>
		<li><code>Voronoi.geo</code> - geometry file read by Gmsh</li>
	</ul>


	<p>A meshed output can be seen in the images below.<br />
<img src="https://dl.dropbox.com/s/qcq3foj1y7m7se5/voronoi_1.jpg?dl=1" alt="" /><br />
<img src="https://dl.dropbox.com/s/iekq1s6ai620011/voronoi_2.jpg?dl=1" alt="" /></p>


	<p>This was created using the default values in the script with 5 rows and 10 columns. Note that the script introduces randomness in the cell boundary position by default.</p>
</div>






<p class="other-formats">
Also available in:
<span><a href="https://nmag.soton.ac.uk/community/wiki/nmag/Granular_media?export=html&amp;version=4" class="html">HTML</a></span>
<span><a href="https://nmag.soton.ac.uk/community/wiki/nmag/Granular_media?export=txt&amp;version=4" class="text">TXT</a></span>
</p>







        
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
	
<div id="footer">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2009 Jean-Philippe Lang
</div>
</div>

</body>
</html>
